(()=>{"use strict";var e={230:function(e,E,t){var r=this&&this.__createBinding||(Object.create?function(e,E,t,r){void 0===r&&(r=t);var _=Object.getOwnPropertyDescriptor(E,t);_&&!("get"in _?!E.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return E[t]}}),Object.defineProperty(e,r,_)}:function(e,E,t,r){void 0===r&&(r=t),e[r]=E[t]}),_=this&&this.__setModuleDefault||(Object.create?function(e,E){Object.defineProperty(e,"default",{enumerable:!0,value:E})}:function(e,E){e.default=E}),T=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var E={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&r(E,e,t);return _(E,e),E},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E,"__esModule",{value:!0}),E.App=void 0;const O=i(t(252)),s=i(t(898)),R=t(536),o=t(564),n=t(894),N=T(t(47));E.App=class{host;app;env;port;redis;constructor(e){this.app=(0,O.default)(),this.env=R.NODE_ENV||"development",this.port=Number(R.PORT),this.host="production"!==R.NODE_ENV?"localhost":"0.0.0.0",this.redis=o.redisStore,this.initializeMiddlewares(),this.initializeRoutes(e),this.initializeErrorHandling(),this.initializeRedisConnection()}listen(){return this.app.listen(this.port,(()=>{n.logger.info("================================="),n.logger.info(`======= ENV: ${this.env} =======`),n.logger.info(`ðŸš€ App running on http://${this.host}:${this.port}`),n.logger.info("=================================")}))}getServer(){return this.app}initializeMiddlewares(){this.app.use(O.default.json()),this.app.use(O.default.urlencoded({extended:!0})),this.app.use((0,s.default)())}initializeRoutes(e){e.forEach((e=>{this.app.use("/",e.router)}))}initializeErrorHandling(){this.app.use(N.ErrorMiddleware)}async initializeRedisConnection(){try{const e=await o.redis.ping();n.logger.info(`Redis connection successful: ${e}`)}catch(e){n.logger.error(e)}}}},47:(e,E,t)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.ErrorMiddleware=void 0;const r=t(153),_=t(894),T=t(554);E.ErrorMiddleware=(e,E,t,i)=>{try{const E=e.status||T.HttpStatus.BAD_GATEWAY,i=e.message||"Something went wrong";_.logger.error(i),t.status(E).json(new r.ApiResponse(E,i,null))}catch(e){i(e)}}},429:(e,E,t)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.Route=void 0;const r=t(252),_=t(554),T=t(153),i=(0,r.Router)();E.Route=class{path="/";router=i;constructor(){this.initializeRoutes()}initializeRoutes(){this.router.get(`${this.path}`,(async(e,E)=>{E.status(_.HttpStatus.OK).json(new T.ApiResponse(_.HttpStatus.OK,"Ok","Hello Wrold"))}))}}},536:function(e,E,t){var r,_=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E,"__esModule",{value:!0}),E.DB_REDIS_PORT=E.DB_REDIS_HOST=E.REFRESH_TOKEN_SECRET=E.ACCESS_TOKEN_SECRET=E.DB_PORT=E.DB_PASSWORD=E.DB_NAME=E.DB_HOST=E.DB_USER=E.NODE_ENV=E.PORT=void 0,_(t(818)).default.config(),r=process.env,E.PORT=r.PORT,E.NODE_ENV="production",E.DB_USER=r.DB_USER,E.DB_HOST=r.DB_HOST,E.DB_NAME=r.DB_NAME,E.DB_PASSWORD=r.DB_PASSWORD,E.DB_PORT=r.DB_PORT,E.ACCESS_TOKEN_SECRET=r.ACCESS_TOKEN_SECRET,E.REFRESH_TOKEN_SECRET=r.REFRESH_TOKEN_SECRET,E.DB_REDIS_HOST=r.DB_REDIS_HOST,E.DB_REDIS_PORT=r.DB_REDIS_PORT},554:(e,E)=>{var t;Object.defineProperty(E,"__esModule",{value:!0}),E.HttpStatus=void 0,function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.PROCESSING=102]="PROCESSING",e[e.EARLYHINTS=103]="EARLYHINTS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.AMBIGUOUS=300]="AMBIGUOUS",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",e[e.MISDIRECTED=421]="MISDIRECTED",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED"}(t||(E.HttpStatus=t={}))},894:function(e,E,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E,"__esModule",{value:!0}),E.logger=void 0;const _=r(t(124));E.logger=_.default.createLogger({level:"debug",format:_.default.format.cli(),transports:[new _.default.transports.Console({})]})},153:(e,E)=>{var t;Object.defineProperty(E,"__esModule",{value:!0}),E.ApiResponse=E.STATUS=void 0,function(e){e.OK="OK",e.CREATED="CREATED",e.ACCEPTED="ACCEPTED",e.NO_CONTENT="NO_CONTENT",e.BAD_REQUEST="BAD_REQUEST",e.UNAUTHORIZED="UNAUTHORIZED",e.FORBIDDEN="FORBIDDEN",e.NOT_FOUND="NOT_FOUND",e.CONFLICT="CONFLICT",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(t||(E.STATUS=t={})),E.ApiResponse=class{code;status;message;data;constructor(e,E,r){this.code=e,this.status=(e=>{switch(e){case 200:return t.OK;case 201:return t.CREATED;case 202:return t.ACCEPTED;case 204:return t.NO_CONTENT;case 400:return t.BAD_REQUEST;case 401:return t.UNAUTHORIZED;case 403:return t.FORBIDDEN;case 404:return t.NOT_FOUND;case 409:return t.CONFLICT;case 500:return t.INTERNAL_SERVER_ERROR;case 503:return t.SERVICE_UNAVAILABLE;default:throw new Error("Invalid status code")}})(e),this.message=E,this.data=r}}},564:function(e,E,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E,"__esModule",{value:!0}),E.redisStore=E.redis=void 0;const _=r(t(344)),T=r(t(659)),i=t(536);E.redis=new T.default({host:i.DB_REDIS_HOST,port:Number(i.DB_REDIS_PORT)}),E.redisStore=new _.default({client:E.redis,prefix:"myapp:"})},344:e=>{e.exports=require("connect-redis")},898:e=>{e.exports=require("cookie-parser")},818:e=>{e.exports=require("dotenv")},252:e=>{e.exports=require("express")},659:e=>{e.exports=require("ioredis")},124:e=>{e.exports=require("winston")}},E={};function t(r){var _=E[r];if(void 0!==_)return _.exports;var T=E[r]={exports:{}};return e[r].call(T.exports,T,T.exports,t),T.exports}(()=>{const e=t(230),E=t(429);new e.App([new E.Route]).listen()})()})();